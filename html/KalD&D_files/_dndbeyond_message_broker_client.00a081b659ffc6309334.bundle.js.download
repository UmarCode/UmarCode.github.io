!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="https://media.dndbeyond.com/message-broker-client/",r(r.s=34)}([function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};e.__esModule=!0,o(r(54),e),o(r(70),e);var i=r(75);n(e,i,"Ctx");var a=r(20);n(e,a,"Evt");var s=r(92);n(e,s,"StatefulEvt");var u=r(28);n(e,u,"matchVoid")},function(t,e,r){"use strict";e.__esModule=!0,e.importProxy=void 0,e.importProxy={}},function(t,e,r){"use strict";e.__esModule=!0,e.typeGuard=void 0,e.typeGuard=function(t,e){return void 0===e&&(e=!0),e}},function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,r(38))},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};e.__esModule=!0,e.overwriteReadonlyProp=void 0,e.overwriteReadonlyProp=function(t,e,r){try{t[e]=r}catch(t){}if(t[e]===r)return r;var o=void 0,i=Object.getOwnPropertyDescriptor(t,e)||{enumerable:!0,configurable:!0};if(i.get)throw new Error("Probably a wrong ides to overwrite "+e+" getter");try{Object.defineProperty(t,e,n(n({},i),{value:r}))}catch(t){o=t}if(t[e]!==r)throw o||new Error("Can't assign");return r}},function(t,e,r){"use strict";e.__esModule=!0,e.Operator=e.z_f1=void 0;var n=r(27);e.z_f1={"fλ_Stateful_match":function(t){return"function"!=typeof t},"fλ_Result_match":function(t){return e.z_f1.fλ_Result_Matched_match(t)||e.z_f1.fλ_Result_NotMatched_match(t)},"fλ_Result_getDetachArg":function(t){var r=e.z_f1.fλ_Result_Matched_match(t)?t[1]:t;return!!e.z_f1.fλ_Result_Detach_FromEvt_match(r)||!!e.z_f1.fλ_Result_Detach_WithCtxArg_match(r)&&[r.DETACH,r.err,r.res]},"fλ_Result_NotMatched_match":function(t){return null===t||e.z_f1.fλ_Result_Detach_match(t)},"fλ_Result_Matched_match":function(t){return n.typeGuard(t)&&t instanceof Object&&!("input"in t)&&(1===t.length||2===t.length&&(null===t[1]||e.z_f1.fλ_Result_Detach_match(t[1])))},"fλ_Result_Detach_FromEvt_match":function(t){return"DETACH"===t},"fλ_Result_Detach_WithCtxArg_match":function(t){return n.typeGuard(t)&&t instanceof Object&&t.DETACH instanceof Object},"fλ_Result_Detach_match":function(t){return e.z_f1.fλ_Result_Detach_FromEvt_match(t)||e.z_f1.fλ_Result_Detach_WithCtxArg_match(t)}},function(t){!function(t){!function(t){t.match=e.z_f1.fλ_Stateful_match}(t.Stateful||(t.Stateful={})),function(t){t.match=e.z_f1.fλ_Result_match,t.getDetachArg=e.z_f1.fλ_Result_getDetachArg,function(t){t.match=e.z_f1.fλ_Result_NotMatched_match}(t.NotMatched||(t.NotMatched={})),function(t){t.match=e.z_f1.fλ_Result_Matched_match}(t.Matched||(t.Matched={})),function(t){!function(t){t.match=e.z_f1.fλ_Result_Detach_FromEvt_match}(t.FromEvt||(t.FromEvt={})),function(t){t.match=e.z_f1.fλ_Result_Detach_WithCtxArg_match}(t.WithCtxArg||(t.WithCtxArg={})),t.match=e.z_f1.fλ_Result_Detach_match}(t.Detach||(t.Detach={}))}(t.Result||(t.Result={}))}(t.fλ||(t.fλ={}))}(e.Operator||(e.Operator={}))},function(t,e,r){"use strict";e.__esModule=!0,e.id=void 0,e.id=function(t){return t}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};e.__esModule=!0,e.defineAccessors=void 0,e.defineAccessors=function(t,e,r){var o=r.get,i=r.set;Object.defineProperty(t,e,n(n(n({},Object.getOwnPropertyDescriptor(t,e)||{enumerable:!0,configurable:!0}),void 0!==o?{get:function(){return o.call(this)}}:{}),void 0!==i?{set:function(t){i.call(this,t)}}:{}))}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};e.__esModule=!0,e.assert=e.AssertionError=void 0;var a=r(4),s=function(t){function e(e){var r=this.constructor,n=t.call(this,"Wrong assertion encountered"+(e?': "'+e+'"':""))||this;if(Object.setPrototypeOf(n,r.prototype),!n.stack)return n;try{a.overwriteReadonlyProp(n,"stack",n.stack.split("\n").filter((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=i(t,2),n=r[1];return 1!==n&&2!==n})).join("\n"))}catch(t){}return n}return o(e,t),e}(Error);e.AssertionError=s,e.assert=function(t,e){if(!t)throw new s(e)}},function(t,e,r){"use strict";e.__esModule=!0,e.invokeOperator=void 0;var n=r(5);e.invokeOperator=function(t,e,r){var o=t(e,void 0,r);return n.z_f1.fλ_Result_match(o)?o:o?[e]:null}},function(t,e,r){"use strict";e.__esModule=!0,e.Polyfill=void 0;var n=r(18);e.Polyfill="undefined"!=typeof WeakMap?WeakMap:n.Polyfill},function(t,e,r){var n=r(13),o=r(39),i=r(43);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(14);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(8);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,r){var n=r(3),o=r(23),i=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};e.__esModule=!0,e.compose=void 0;var i=r(30),a=r(10),s=r(6),u=r(9),c=r(2),f=r(5);function l(t,e){var r=f.z_f1.fλ_Stateful_match(t)?i.encapsulateOpState(t):s.id(t),o=f.z_f1.fλ_Stateful_match(e)?i.encapsulateOpState(e):s.id(e);return s.id((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=n(t,3),l=i[0],h=i[2],d=a.invokeOperator(r,l,h);if(f.z_f1.fλ_Result_NotMatched_match(d))return u.assert(c.typeGuard(d)),d;var p=d[1]?d[1]:null;u.assert(c.typeGuard(p));var v=n(d,1),y=v[0],_=a.invokeOperator(o,y,h);return f.Operator.fλ.Result.NotMatched.match(_)?(u.assert(c.typeGuard(_)),null!==p?p:_):s.id([_[0],p||(_[1]?_[1]:null)])}))}e.compose=function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(1===e.length){var a=n(e,1),s=a[0];return f.z_f1.fλ_Stateful_match(s)?i.encapsulateOpState(s):s}var u=n(e),c=u[0],h=u[1],d=u.slice(2),p=l(c,h);return 0===d.length?p:t.apply(void 0,o([p],d))}},function(t,e,r){"use strict";e.__esModule=!0,e.Polyfill=e.LightMapImpl=void 0;var n=function(){function t(){this.record=[]}return t.prototype.has=function(t){return this.record.map((function(t){return t[0]})).indexOf(t)>=0},t.prototype.get=function(t){var e=this.record.filter((function(e){return e[0]===t}))[0];if(void 0!==e)return e[1]},t.prototype.set=function(t,e){var r=this.record.filter((function(e){return e[0]===t}))[0];return void 0===r?this.record.push([t,e]):r[1]=e,this},t.prototype.delete=function(t){var e=this.record.map((function(t){return t[0]})).indexOf(t);return!(e<0)&&(this.record.splice(e,1),!0)},t.prototype.keys=function(){return this.record.map((function(t){return t[0]}))},t}();e.LightMapImpl=n,e.Polyfill="undefined"!=typeof Map?Map:n},function(t,e,r){"use strict";e.__esModule=!0,e.LazyEvt=void 0;var n=r(4),o=r(1),i=r(7),a=function(){function t(){this.initialPostCount=0}return t.prototype.post=function(t){return void 0===this.__evt?++this.initialPostCount:this.__evt.post(t)},t.__1=void i.defineAccessors(t.prototype,"evt",{get:function(){return void 0===this.__evt&&(this.__evt=new o.importProxy.Evt,n.overwriteReadonlyProp(this.__evt,"postCount",this.initialPostCount)),this.__evt}}),t}();e.LazyEvt=a},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};e.__esModule=!0,e.Evt=e.doDetachIfNeeded=void 0,r(77);var s=r(1),u=r(78),c=r(79),f=r(80),l=r(31),h=r(81),d=r(82),p=r(83),v=r(84),y=r(85),_=r(32),m=r(86),g=r(19),b=r(7),w=r(10),E=r(18),x=r(11),O=r(87),S=r(4),P=r(2),M=r(30),A=r(88),T=r(89),j=r(90),C=r(91),k=r(5),z=r(29),R=r(25),D=function(){function t(){this.lazyEvtAttach=new g.LazyEvt,this.lazyEvtDetach=new g.LazyEvt,this.__maxHandlers=void 0,this.postCount=0,this.traceId=null,this.handlers=[],this.handlerTriggers=new E.Polyfill,this.__currentChronologyMark=0,this.asyncHandlerCount=0}return t.setDefaultMaxHandlers=function(t){this.__defaultMaxHandlers=isFinite(t)?t:0},t.prototype.toStateful=function(t,e){var r=R.z_3.match(t),n=r?void 0:t,o=e||(r?t:void 0),i=new s.importProxy.StatefulEvt(n),a=function(t){return i.post(t)};return o?this.attach(o,a):this.attach(a),i},t.prototype.setMaxHandlers=function(t){return this.__maxHandlers=isFinite(t)?t:0,this},t.prototype.enableTrace=function(t){var e=t.id,r=t.formatter,n=t.log;this.traceId=e,this.traceFormatter=r||function(t){try{return JSON.stringify(t,null,2)}catch(e){return""+t}},this.log=void 0===n?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.log.apply(console,i(t))}:!1===n?void 0:n},t.prototype.disableTrace=function(){return this.traceId=null,this},t.prototype.getChronologyMark=function(){return this.__currentChronologyMark++},t.prototype.detachHandler=function(t,e,r){var n=this.handlers.indexOf(t);return!(n<0)&&(P.typeGuard(t,!!t.ctx)&&t.ctx.zz__removeHandler(t),this.handlers.splice(n,1),t.async&&this.asyncHandlerCount--,this.handlerTriggers.delete(t),void 0!==e[0]&&(j.safeClearTimeout(e[0]),r(new z.EvtError.Detached)),this.lazyEvtDetach.post(t),!0)},t.prototype.triggerHandler=function(t,e,r,n){var i=t.callback,a=t.once;void 0!==e[0]&&(j.safeClearTimeout(e[0]),e[0]=void 0),H(t,n,a);var s=o(n,1)[0],u=null==i?void 0:i.call(this,s);return null==r||r(s),C.isPromiseLike(u)?u:void 0},t.prototype.addHandler=function(t,e){var r=this;k.z_f1.fλ_Stateful_match(t.op)&&this.statelessByStatefulOp.set(t.op,M.encapsulateOpState(t.op));var o=new A.Deferred,i=[void 0],a=n(n(n({},t),e),{detach:function(){return r.detachHandler(a,i,o.reject)},promise:o.pr});if("number"==typeof a.timeout&&(i[0]=j.safeSetTimeout((function(){i[0]=void 0,a.detach(),o.reject(new z.EvtError.Timeout(a.timeout))}),a.timeout)),this.handlerTriggers.set(a,(function(t){return r.triggerHandler(a,i,o.isPending?o.resolve:void 0,t)})),a.async&&this.asyncHandlerChronologyMark.set(a,this.getChronologyMark()),a.prepend){var s=void 0;for(s=0;s<this.handlers.length&&this.handlers[s].extract;s++);this.handlers.splice(s,0,a)}else this.handlers.push(a);return a.async&&this.asyncHandlerCount++,this.checkForPotentialMemoryLeak(),P.typeGuard(a,!!a.ctx)&&a.ctx.zz__addHandler(a,this),this.lazyEvtAttach.post(a),a},t.prototype.checkForPotentialMemoryLeak=function(){var e=void 0!==this.__maxHandlers?this.__maxHandlers:t.__defaultMaxHandlers;if(0!==e&&this.handlers.length%(e+1)==0){var r=["MaxHandlersExceededWarning: Possible Evt memory leak detected.",this.handlers.length+" handlers attached"+(this.traceId?' to "'+this.traceId+'"':"")+".\n","Use Evt.prototype.setMaxHandlers(n) to increase limit on a specific Evt.\n","Use Evt.setDefaultMaxHandlers(n) to change the default limit currently set to "+t.__defaultMaxHandlers+".\n"].join(""),o=new E.Polyfill;this.getHandlers().map((function(t){var e=t.ctx,r=t.async,o=t.once,i=t.prepend,a=t.extract,s=t.op,u=t.callback;return n(n({hasCtx:!!e,once:o,prepend:i,extract:a,isWaitFor:r},s===_.matchAll?{}:{op:s.toString()}),u?{callback:u.toString()}:{})})).map((function(t){return"{\n"+Object.keys(t).map((function(e){return"  "+e+": "+t[e]})).join(",\n")+"\n}"})).forEach((function(t){return o.set(t,(o.has(t)?o.get(t):0)+1)})),r+="\n"+Array.from(o.keys()).map((function(t){return o.get(t)+" handler"+(1===o.get(t)?"":"s")+" like:\n"+t})).join("\n")+"\n",null===this.traceId&&(r+="\n"+["To validate the identify of the Evt instance that is triggering this warning you can call",'Evt.prototype.enableTrace({ "id": "My evt id", "log": false }) on the Evt that you suspect.\n'].join(" "));try{console.warn(r)}catch(t){}}},t.prototype.getStatelessOp=function(t){return k.z_f1.fλ_Stateful_match(t)?this.statelessByStatefulOp.get(t):t},t.prototype.trace=function(t){var e,r=this;if(null!==this.traceId){var n="("+this.traceId+") ";if(!!this.handlers.find((function(e){var n=e.extract,o=e.op;return n&&!!r.getStatelessOp(o)(t)})))n+="extracted ";else{var o=this.handlers.filter((function(e){var n=e.extract,o=e.op;return!n&&!!r.getStatelessOp(o)(t)})).length;n+=o+" handler"+(o>1?"s":"")+", "}null===(e=this.log)||void 0===e||e.call(this,n+this.traceFormatter(t))}},t.prototype.postSync=function(t){var e,r,n=[],o=function(t){return[t,Promise.all(n).then((function(){}))]};try{for(var s=a(i(this.handlers)),u=s.next();!u.done;u=s.next()){var c=u.value,f=c.async,l=c.op,h=c.extract;if(!f){var d=w.invokeOperator(this.getStatelessOp(l),t,!0);if(k.z_f1.fλ_Result_NotMatched_match(d))H(c,d);else{var p=this.handlerTriggers.get(c);if(p){var v=p(d);if(void 0!==v&&n.push(v),h)return o(!0)}}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o(!1)},t.prototype.postAsyncFactory=function(){var t=this;return O.buildMethodCb((function(e,r,n){var o,s;if(0!==t.asyncHandlerCount){var u,c=[];Promise.resolve().then((function(){return u=t.getChronologyMark()}));var f=function(n){if(!n.async)return"continue";var o=w.invokeOperator(t.getStatelessOp(n.op),e,!0);if(k.z_f1.fλ_Result_NotMatched_match(o))return H(n,o),"continue";var i=t.handlerTriggers.get(n);return i&&function(){var e=t.asyncHandlerChronologyMark.get(n);if(r>e)return!0;var o=t.asyncHandlerChronologyExceptionRange.get(n);return void 0!==o&&o.lowerMark<r&&r<o.upperMark&&e>o.upperMark}()?(c.push(new Promise((function(t){return n.promise.then((function(){return t()})).catch((function(){return t()}))}))),void i(o)):"continue"};try{for(var l=a(i(t.handlers)),h=l.next();!h.done;h=l.next()){f(h.value)}}catch(t){o={error:t}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(0!==c.length){var d=i(t.handlers);Promise.all(c).then((function(){var e,o;try{for(var i=a(t.handlers),s=i.next();!s.done;s=i.next()){var c=s.value;c.async&&(d.indexOf(c)>=0||t.asyncHandlerChronologyExceptionRange.set(c,{lowerMark:r,upperMark:u}))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}n()}))}else n()}else n()}))},t.prototype.isHandled=function(t){var e=this;return!!this.getHandlers().find((function(r){var n=r.op;return!!e.getStatelessOp(n)(t)}))},t.prototype.getHandlers=function(){return i(this.handlers)},t.prototype.detach=function(t){var e,r,n=[];try{for(var o=a(this.getHandlers()),i=o.next();!i.done;i=o.next()){var s=i.value;if(void 0===t||s.ctx===t)s.detach()&&n.push(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=new t;return this.addHandler(n(n({},_.parsePropsFromArgs(e,"pipe")),{callback:function(t){return o.post(t)}}),t.propsFormMethodNames.attach),o},t.prototype.waitFor=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.addHandler(_.parsePropsFromArgs(e,"waitFor"),t.propsFormMethodNames.waitFor).promise},t.prototype.$attach=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attach.apply(this,i(t))},t.prototype.attach=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attach")},t.prototype.$attachOnce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachOnce.apply(this,i(t))},t.prototype.attachOnce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachOnce")},t.prototype.$attachExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachExtract.apply(this,i(t))},t.prototype.attachExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachExtract")},t.prototype.$attachPrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachPrepend.apply(this,i(t))},t.prototype.attachPrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachPrepend")},t.prototype.$attachOncePrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachOncePrepend.apply(this,i(t))},t.prototype.attachOncePrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachOncePrepend")},t.prototype.$attachOnceExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachOnceExtract.apply(this,i(t))},t.prototype.attachOnceExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachOnceExtract")},t.prototype.__attachX=function(e,r){var n=_.parsePropsFromArgs(e,"attach*"),o=this.addHandler(n,t.propsFormMethodNames[r]);return void 0===n.timeout?this:o.promise},t.prototype.postAsyncOnceHandled=function(t){var e=this;if(this.isHandled(t))return this.post(t);var r=new A.Deferred;return this.evtAttach.attachOnce((function(r){var n=r.op;return!!w.invokeOperator(e.getStatelessOp(n),t)}),(function(){return Promise.resolve().then((function(){return r.resolve(e.post(t))}))})),r.pr},t.prototype.postOrPostAndWait=function(t,e){var r=this;this.trace(t),S.overwriteReadonlyProp(this,"postCount",this.postCount+1);var n=this.getChronologyMark(),i=o(this.postSync(t),2),a=i[0],s=i[1],u=e?function(){return s}:function(){return r.postCount};if(a)return u();if(void 0===this.postAsync){if(0===this.asyncHandlerCount)return u();this.postAsync=this.postAsyncFactory()}return this.postAsync(t,n),u()},t.prototype.post=function(t){return this.postOrPostAndWait(t,!1)},t.prototype.postAndWait=function(t){return this.postOrPostAndWait(t,!0)},t.create=u.create,t.newCtx=m.newCtx,t.merge=l.merge,t.from=h.from,t.useEffect=d.useEffect,t.getCtx=c.getCtxFactory(),t.loosenType=T.loosenType,t.factorize=f.factorize,t.asPostable=p.asPostable,t.asyncPipe=v.asyncPipe,t.asNonPostable=y.asNonPostable,t.__defaultMaxHandlers=25,t.__1=(b.defineAccessors(t.prototype,"evtAttach",{get:function(){return this.lazyEvtAttach.evt}}),void b.defineAccessors(t.prototype,"evtDetach",{get:function(){return this.lazyEvtDetach.evt}})),t.__2=void Object.defineProperties(t.prototype,["__asyncHandlerChronologyMark","__asyncHandlerChronologyExceptionRange","__statelessByStatefulOp"].map((function(t){return[t.substr(2),{get:function(){return void 0===this[t]&&(this[t]=new x.Polyfill),this[t]}}]})).reduce((function(t,e){var r,i=o(e,2),a=i[0],s=i[1];return n(n({},t),((r={})[a]=s,r))}),{})),t.propsFormMethodNames={waitFor:{async:!0,extract:!1,once:!0,prepend:!1},attach:{async:!1,extract:!1,once:!1,prepend:!1},attachExtract:{async:!1,extract:!0,once:!1,prepend:!0},attachPrepend:{async:!1,extract:!1,once:!1,prepend:!0},attachOnce:{async:!1,extract:!1,once:!0,prepend:!1},attachOncePrepend:{async:!1,extract:!1,once:!0,prepend:!0},attachOnceExtract:{async:!1,extract:!0,once:!0,prepend:!0}},t}();function H(t,e,r){var n=k.z_f1.fλ_Result_getDetachArg(e);if("boolean"!=typeof n){var i=o(n,3),a=i[0],s=i[1],u=i[2];s?a.abort(s):a.done(u)}else(n||r)&&t.detach()}e.doDetachIfNeeded=H,e.Evt=D;try{S.overwriteReadonlyProp(e.Evt,"name","Evt")}catch(t){}s.importProxy.Evt=e.Evt},function(t){t.exports=JSON.parse('{"a":{"baseElementId":"message-broker-client","template":"config/developmentIndexTemplate.ejs"}}')},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(3),o=r(12);t.exports=function(t,e){try{o(n,t,e)}catch(r){n[t]=e}return e}},function(t,e,r){var n=r(16),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return o.call(t)}),t.exports=n.inspectSource},function(t,e,r){"use strict";e.__esModule=!0,e.CtxLike=e.z_3=void 0;var n=r(2);e.z_3={match:function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.done&&"function"==typeof t.abort&&"function"==typeof t.zz__addHandler&&"function"==typeof t.zz__removeHandler}},function(t){t.match=e.z_3.match}(e.CtxLike||(e.CtxLike={}))},function(t,e,r){"use strict";e.__esModule=!0,e.EventTargetLike=e.z_2=void 0;var n=r(27);e.z_2={RxJSSubject_match:function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.subscribe},NodeStyleEventEmitter_match:function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.addListener&&"function"==typeof t.removeListener},JQueryStyleEventEmitter_match:function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.on&&"function"==typeof t.off},HasEventTargetAddRemove_match:function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener},canBe:function(t){try{return e.z_2.HasEventTargetAddRemove_match(t)||e.z_2.NodeStyleEventEmitter_match(t)||e.z_2.JQueryStyleEventEmitter_match(t)||e.z_2.RxJSSubject_match(t)}catch(t){return!1}}},function(t){!function(t){t.match=e.z_2.RxJSSubject_match}(t.RxJSSubject||(t.RxJSSubject={})),function(t){t.match=e.z_2.NodeStyleEventEmitter_match}(t.NodeStyleEventEmitter||(t.NodeStyleEventEmitter={})),function(t){t.match=e.z_2.JQueryStyleEventEmitter_match}(t.JQueryStyleEventEmitter||(t.JQueryStyleEventEmitter={})),function(t){t.match=e.z_2.HasEventTargetAddRemove_match}(t.HasEventTargetAddRemove||(t.HasEventTargetAddRemove={})),t.canBe=e.z_2.canBe}(e.EventTargetLike||(e.EventTargetLike={}))},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]});e.__esModule=!0,n(e,r(9),"assert"),n(e,r(64),"exclude"),n(e,r(6),"id"),n(e,r(28),"matchVoid"),n(e,r(65),"objectKeys"),n(e,r(2),"typeGuard")},function(t,e,r){"use strict";e.__esModule=!0,e.matchVoid=void 0,e.matchVoid=function(t){return void 0===t}},function(t,e,r){"use strict";e.__esModule=!0,e.EvtError=void 0;var n=r(66),o=r(67);!function(t){t.Timeout=n.Timeout,t.Detached=o.Detached}(e.EvtError||(e.EvtError={}))},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};e.__esModule=!0,e.encapsulateOpState=void 0;var o=r(6),i=r(5);e.encapsulateOpState=function(t){var e=t[1];return o.id((function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=n(r,3),s=a[0],u=a[2],c=t[0](s,e,u);return u&&i.z_f1.fλ_Result_Matched_match(c)&&(e=c[0]),c}))}},function(t,e,r){"use strict";e.__esModule=!0,e.merge=e.mergeImpl=void 0;var n=r(1);function o(t,e){var r=new n.importProxy.Evt,o=function(t){return r.post(t)};return e.forEach((function(e){void 0===t?e.attach(o):e.attach(t,o)})),r}e.mergeImpl=o,e.merge=function(t,e){return"length"in t?o(void 0,t):o(t,e)}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};e.__esModule=!0,e.parsePropsFromArgs=e.matchAll=void 0;var a=r(6),s=r(17),u=r(2);function c(){return!0}e.matchAll=c;var f=function(t){return void 0!==t&&u.typeGuard(t)&&("function"==typeof t||"function"==typeof t[0])},l={op:c,ctx:void 0,timeout:void 0,callback:void 0};e.parsePropsFromArgs=function t(e,r){switch(u.typeGuard(l),r){case"pipe":var c=function(t){return 0===t.length?{}:{op:1===t.length?t[0]:s.compose.apply(void 0,i(t))}};if(f(e[0]))return a.id(n(n({},l),c(e)));var h=o(e),d=h[0],p=h.slice(1);return a.id(n(n(n({},l),void 0!==d?{ctx:d}:{}),c(p)));case"waitFor":return t(i(e.filter((function(t,r){return!(r===e.length-1&&void 0===t)})),[l.callback]),"attach*");case"attach*":switch(e.length){case 4:var v=o(e,4),y=v[0],_=v[1],m=v[2],g=v[3];return a.id(n(n({},l),{op:y,ctx:_,timeout:m,callback:g}));case 3:var b=o(e,3);y=b[0],_=b[1],m=b[2];if("number"==typeof _){var w=_,E=m;return f(y)?a.id(n(n({},l),{timeout:w,callback:E,op:y})):a.id(n(n({},l),{timeout:w,callback:E,ctx:y}))}return a.id(n(n({},l),{op:y,ctx:_,callback:m}));case 2:var x=o(e,2);y=x[0],_=x[1];if("number"==typeof y)return a.id(n(n({},l),{timeout:y,callback:_}));E=_;return f(y)?a.id(n(n({},l),{callback:E,op:y})):a.id(n(n({},l),{callback:E,ctx:y}));case 1:var O=o(e,1)[0];return a.id(n(n({},l),{callback:O}));case 0:return a.id(n({},l))}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AuthUtils",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"UserUtils",{enumerable:!0,get:function(){return o.default}}),e.default=void 0;var n=i(r(52)),o=i(r(53));function i(t){return t&&t.__esModule?t:{default:t}}var a=n.default;e.default=a},function(t,e,r){r(35),t.exports=r(95)},function(t,e,r){"use strict";r.r(e),r.d(e,"Headers",(function(){return p})),r.d(e,"Request",(function(){return w})),r.d(e,"Response",(function(){return x})),r.d(e,"DOMException",(function(){return S})),r.d(e,"fetch",(function(){return P}));var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,a="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in n,u="ArrayBuffer"in n;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function _(t){var e=new FileReader,r=y(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:a&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():u&&a&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(t)||f(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=v(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(_)}),this.text=function(){var t,e,r,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=y(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=l(t),e=h(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},p.prototype.delete=function(t){delete this.map[l(t)]},p.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},p.prototype.set=function(t,e){this.map[l(t)]=h(e)},p.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),d(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),d(t)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function E(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function x(t,e){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var O=[301,302,303,307,308];x.redirect=function(t,e){if(-1===O.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})};var S=n.DOMException;try{new S}catch(t){(S=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),S.prototype.constructor=S}function P(t,e){return new Promise((function(r,o){var i=new w(t,e);if(i.signal&&i.signal.aborted)return o(new S("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;setTimeout((function(){r(new x(o,n))}),0)},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){o(new S("Aborted","AbortError"))}),0)},s.open(i.method,function(t){try{return""===t&&n.location.href?n.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":u&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof p?i.headers.forEach((function(t,e){s.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){s.setRequestHeader(t,h(e.headers[t]))})),i.signal&&(i.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",c)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}P.polyfill=!0,n.fetch||(n.fetch=P,n.Headers=p,n.Request=w,n.Response=x)},function(t,e,r){"use strict";var n=r(37),o=r(15),i=r(14),a=r(51),s=RegExp.prototype,u=s.toString,c=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f="toString"!=u.name;(c||f)&&n(RegExp.prototype,"toString",(function(){var t=o(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in s)?a.call(t):r)}),{unsafe:!0})},function(t,e,r){var n=r(3),o=r(12),i=r(22),a=r(23),s=r(24),u=r(44),c=u.get,f=u.enforce,l=String(String).split("String");(t.exports=function(t,e,r,s){var u,c=!!s&&!!s.unsafe,h=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof e||i(r,"name")||o(r,"name",e),(u=f(r)).source||(u.source=l.join("string"==typeof e?e:""))),t!==n?(c?!d&&t[e]&&(h=!0):delete t[e],h?t[e]=r:o(t,e,r)):h?t[e]=r:a(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(13),o=r(40),i=r(15),a=r(42),s=Object.defineProperty;e.f=n?s:function(t,e,r){if(i(t),e=a(e,!0),i(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(13),o=r(14),i=r(41);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(3),o=r(8),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,r){var n=r(8);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n,o,i,a=r(45),s=r(3),u=r(8),c=r(12),f=r(22),l=r(16),h=r(46),d=r(50),p=s.WeakMap;if(a){var v=l.state||(l.state=new p),y=v.get,_=v.has,m=v.set;n=function(t,e){return e.facade=t,m.call(v,t,e),e},o=function(t){return y.call(v,t)||{}},i=function(t){return _.call(v,t)}}else{var g=h("state");d[g]=!0,n=function(t,e){return e.facade=t,c(t,g,e),e},o=function(t){return f(t,g)?t[g]:{}},i=function(t){return f(t,g)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},function(t,e,r){var n=r(3),o=r(24),i=n.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,r){var n=r(47),o=r(49),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,r){var n=r(48),o=r(16);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.9.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e){t.exports={}},function(t,e,r){"use strict";var n=r(15);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=30,o=function(t){return"Bearer ".concat(t)},i=function(t){var e=t.authUrl,r=void 0===e?"https://auth-service.dndbeyond.com/v1/cobalt-token":e,n=t.throwOnHttpStatusError,o=void 0===n||n;return fetch(r,{credentials:"include",method:"POST"}).then((function(t){if(o&&t.status>=400&&t.status<600)throw new Error("Bad response from server");return t.json()}))},a=function(t){var e,r,o=t.earlyRefresh,a=void 0===o?n:o,s=t.getShortTermTokenFunc,u=void 0===s?i:s,c=0,f=null;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.ignoreAnonymousTimeToLive,i=void 0!==o&&o;if(f)return f;var s=!i||null!=r;return s&&c&&e+c>Date.now()?new Promise((function(t){return t(r)})):(e=Date.now(),f=u(t).then((function(t){return r=t.token,c=1e3*(t.ttl-a),f=null,t.token})).catch((function(t){throw c=0,r=null,f=null,t})))}},s={makeGetShortTermToken:a,makeGetAuthorizationHeaders:function(t){var e=t.madeGetShortTermToken||a(t);return function(){return e.apply(void 0,arguments).then((function(t){return t?{Authorization:o(t)}:{}}))}}};e.default=s},function(t,e,r){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t,e){return function(r){return e.apply(void 0,n(t.map((function(t){return t(r)}))))}},i=function(t){return t||{}},a={getId:o([i],(function(t){return t.id})),getName:o([i],(function(t){return t.name})),getRoles:o([i],(function(t){return t.roles||[]})),getSubscriptions:o([i],(function(t){return t.subscriptions||[]})),getSubscriptionTier:o([i],(function(t){return t.subscriptionTier})),jwtToUser:function(t){return t?{id:t["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"],name:t["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"],roles:t["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],subscription:t["http://schemas.dndbeyond.com/ws/2019/08/identity/claims/subscriber"],subscriptionTier:t["http://schemas.dndbeyond.com/ws/2019/08/identity/claims/subscriptiontier"]}:null}};e.default=a},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};e.__esModule=!0,e.dom=void 0,o(r(55),e),o(r(56),e),o(r(26),e),o(r(29),e),o(r(68),e);var i=r(69);e.dom=i,o(r(5),e)},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};e.__esModule=!0,o(r(57),e),o(r(25),e),o(r(58),e),o(r(59),e),o(r(60),e),o(r(61),e),o(r(62),e),o(r(63),e)},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0,e.exclude=void 0,e.exclude=function(t){var e=t instanceof Object?function(e){return t.indexOf(e)<0}:function(e){return e!==t};return function(t){return e(t)}}},function(t,e,r){"use strict";e.__esModule=!0,e.objectKeys=void 0,e.objectKeys=function(t){return Object.keys(t)}},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0,e.Timeout=void 0;var i=function(t){function e(e){var r=this.constructor,n=t.call(this,"Evt timeout after "+e+"ms")||this;return n.timeout=e,Object.setPrototypeOf(n,r.prototype),n}return o(e,t),e}(Error);e.Timeout=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0,e.Detached=void 0;var i=function(t){function e(){var e=this.constructor,r=t.call(this,"Evt handler detached")||this;return Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(Error);e.Detached=i},function(t,e,r){"use strict";e.__esModule=!0},function(t,e,r){"use strict";e.__esModule=!0,e.__hack=void 0,
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0
 
THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.
 
See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
e.__hack="NOT TYPE ONLY"},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};e.__esModule=!0,o(r(71),e);var i=r(17);n(e,i,"compose");var a=r(10);n(e,a,"invokeOperator")},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]});e.__esModule=!0,n(e,r(72),"throttleTime"),n(e,r(73),"to"),n(e,r(74),"nonNullable")},function(t,e,r){"use strict";e.__esModule=!0,e.throttleTime=void 0;var n=r(17);e.throttleTime=function(t){return n.compose([function(e,r){var n=r.lastClick,o=Date.now();return o-n<t?null:[{data:e,lastClick:o}]},{lastClick:0,data:null}],(function(t){return[t.data]}))}},function(t,e,r){"use strict";e.__esModule=!0,e.to=void 0;var n=new Map;e.to=function(t){var r;return null!==(r=n.get(t))&&void 0!==r?r:(n.set(t,(function(e){return e[0]!==t?null:[e[1]]})),e.to(t))}},function(t,e,r){"use strict";e.__esModule=!0,e.nonNullable=void 0;e.nonNullable=function(t){return null==t?null:[t]}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};e.__esModule=!0,e.Ctx=void 0;var i=r(76),a=r(11),s=r(9),u=r(2),c=r(19),f=r(1),l=r(7),h=r(4),d=function(){function t(){this.lazyEvtAttach=new c.LazyEvt,this.lazyEvtDetach=new c.LazyEvt,this.lazyEvtDoneOrAborted=new c.LazyEvt,this.handlers=new i.Polyfill,this.evtByHandler=new a.Polyfill}return t.prototype.onDoneOrAborted=function(t){this.lazyEvtDoneOrAborted.post(t)},t.prototype.waitFor=function(t){var e=this;return this.evtDoneOrAborted.waitFor(t).then((function(t){if("ABORTED"===t.type)throw t.error;return t.result}),(function(t){throw e.abort(t),t}))},t.prototype.abort=function(t){return this.__done(t)},t.prototype.done=function(t){return this.__done(void 0,t)},t.prototype.__done=function(t,e){var r,i,a=[];try{for(var s=o(this.handlers.values()),u=s.next();!u.done;u=s.next()){var c=u.value,f=this.evtByHandler.get(c);c.detach()&&a.push({handler:c,evt:f})}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return this.onDoneOrAborted(n(n({},t?{type:"ABORTED",error:t}:{type:"DONE",result:e}),{handlers:a})),a},t.prototype.getHandlers=function(){var t=this;return Array.from(this.handlers.values()).map((function(e){return{handler:e,evt:t.evtByHandler.get(e)}}))},t.prototype.zz__addHandler=function(t,e){s.assert(t.ctx===this),s.assert(u.typeGuard(t)),this.handlers.add(t),this.evtByHandler.set(t,e),this.lazyEvtAttach.post({handler:t,evt:e})},t.prototype.zz__removeHandler=function(t){s.assert(t.ctx===this),s.assert(u.typeGuard(t)),this.lazyEvtDetach.post({handler:t,evt:this.evtByHandler.get(t)}),this.handlers.delete(t)},t.__1=(l.defineAccessors(t.prototype,"evtDoneOrAborted",{get:function(){return this.lazyEvtDoneOrAborted.evt}}),l.defineAccessors(t.prototype,"evtAttach",{get:function(){return this.lazyEvtAttach.evt}}),void l.defineAccessors(t.prototype,"evtDetach",{get:function(){return this.lazyEvtDetach.evt}})),t}();e.Ctx=d;try{h.overwriteReadonlyProp(e.Ctx,"name","Ctx")}catch(t){}f.importProxy.Ctx=e.Ctx},function(t,e,r){"use strict";e.__esModule=!0,e.Polyfill=e.LightSetImpl=void 0;var n=r(18),o=function(){function t(t){if(this.map=new n.Polyfill,void 0!==t)for(var e=0,r=t;e<r.length;e++){var o=r[e];this.add(o)}}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.add=function(t){return this.map.set(t,!0),this},t.prototype.values=function(){return this.map.keys()},t.prototype.delete=function(t){return this.map.delete(t)},t}();e.LightSetImpl=o,e.Polyfill="undefined"!=typeof Set?Set:o},function(t,e,r){"use strict";e.__esModule=!0,Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),r=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var i=e[o];if(t.call(n,i,o,e))return i;o++}},configurable:!0,writable:!0})},function(t,e,r){"use strict";e.__esModule=!0,e.create=void 0;var n=r(1);e.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?new n.importProxy.Evt:new n.importProxy.StatefulEvt(t[0])}},function(t,e,r){"use strict";e.__esModule=!0,e.getCtxFactory=void 0;var n=r(11),o=r(1);e.getCtxFactory=function(){var t=new n.Polyfill;return function(e){var r=t.get(e);return void 0===r&&(r=new o.importProxy.Ctx,t.set(e,r)),r}}},function(t,e,r){"use strict";e.__esModule=!0,e.factorize=void 0,e.factorize=function(t){return t}},function(t,e,r){"use strict";e.__esModule=!0,e.from=void 0;var n=r(6),o=r(9),i=r(2),a=r(31),s=r(1),u=r(26);function c(t,e,r,i){var f,l,h,d;if(h=e,!u.z_2.canBe(h)){if("then"in e){var p=new s.importProxy.Evt,v=(l=(f=function(){return null==t?void 0:t.evtDoneOrAborted.postCount})(),function(){return l!==f()});return e.then((function(t){v()||p.post(t)})),p}return a.mergeImpl(t,Array.from(e).map((function(e){return c(t,e,r,i)})))}if(u.z_2.NodeStyleEventEmitter_match(e))d={on:function(t,r){return e.addListener(r,t)},off:function(t,r){return e.removeListener(r,t)}};else if(u.z_2.JQueryStyleEventEmitter_match(e))d={on:function(t,r){return e.on(r,t)},off:function(t,r){return e.off(r,t)}};else if(u.z_2.HasEventTargetAddRemove_match(e))d={on:function(t,r,n){return e.addEventListener(r,t,n)},off:function(t,r,n){return e.removeEventListener(r,t,n)}};else if(u.z_2.RxJSSubject_match(e)){var y;d={on:function(t){return y=e.subscribe((function(e){return t(e)}))},off:function(){return y.unsubscribe()}}}else n.id(e),o.assert(!1);var _=new s.importProxy.Evt,m=function(t){return _.post(t)};return null==t||t.evtDoneOrAborted.attachOnce((function(){return d.off(m,r,i)})),d.on(m,r,i),_}e.from=function(t,e,r,n){return"evtDoneOrAborted"in t?(o.assert(i.typeGuard(e)&&i.typeGuard(r)&&i.typeGuard(n)),c(t,e,r,n)):(o.assert(i.typeGuard(e)&&i.typeGuard(r)),c(void 0,t,e,r))}},function(t,e,r){"use strict";e.__esModule=!0,e.useEffect=void 0,e.useEffect=function(t,e,r){var n=0;("state"in e?e.evtChange:e).attach((function(e){return t(e,{isFirst:!1,data:e},n++)})),t("state"in e?e.state:null==r?void 0:r[0],{isFirst:!0},n++)}},function(t,e,r){"use strict";e.__esModule=!0,e.asPostable=void 0,e.asPostable=function(t){return t}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};e.__esModule=!0,e.asyncPipe=void 0;var i=r(20);e.asyncPipe=function(t,e){var r=this,a="state"in t?i.Evt.create(void 0):i.Evt.create(),s=0,u=function(i){return n(r,void 0,void 0,(function(){var r,n,u;return o(this,(function(o){switch(o.label){case 0:return s++,r=s,null!==(n=e(i))&&"then"in n?[4,n]:[3,2];case 1:return u=o.sent(),"state"in t&&r!==s?[2]:[3,3];case 2:u=n,o.label=3;case 3:return null===u||a.post(u[0]),[2]}}))}))};return t.attach(u),"state"in t&&u(t.state),a}},function(t,e,r){"use strict";e.__esModule=!0,e.asNonPostable=void 0,e.asNonPostable=function(t){return t}},function(t,e,r){"use strict";e.__esModule=!0,e.newCtx=void 0;var n=r(1);e.newCtx=function(){return new n.importProxy.Ctx}},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};e.__esModule=!0,e.buildMethodCb=e.buildCb=e.getPrComplete=e.isRunning=e.cancelAllQueuedCalls=e.getQueuedCallCount=e.buildMethod=e.build=e.createGroupRef=void 0;var o=r(11),i=function(){function t(){this.queuedCalls=[],this.isRunning=!1,this.prComplete=Promise.resolve()}return t.prototype.cancelAllQueuedCalls=function(){var t;return this.queuedCalls.splice(0,t=this.queuedCalls.length),t},t}(),a={},s=new o.Polyfill;function u(t,e){var r=s.get(t);r||(r=new o.Polyfill,s.set(t,r));var n=r.get(e);return n||(n=new i,r.set(e,n)),n}function c(){return new Array(0)}e.createGroupRef=c,e.build=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return h(!0,c(),t[0]);case 2:return h(!0,t[0],t[1])}},e.buildMethod=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return h(!1,c(),t[0]);case 2:return h(!1,t[0],t[1])}},e.getQueuedCallCount=function(t,e){var r=l(t,e);return r?r.queuedCalls.length:0},e.cancelAllQueuedCalls=function(t,e){var r=l(t,e);return r?r.cancelAllQueuedCalls():0},e.isRunning=function(t,e){var r=l(t,e);return!!r&&r.isRunning},e.getPrComplete=function(t,e){var r=l(t,e);return r?r.prComplete:Promise.resolve()};var f=new o.Polyfill;function l(t,e){void 0===e&&(e=a);var r=f.get(t);if(!r)throw Error("Not a run exclusiveFunction");var n=s.get(e);if(n)return n.get(r)}function h(t,e,r){var n,o=function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(!t){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");n=u(this,e)}return new Promise((function(t,e){var a;n.prComplete=new Promise((function(t){return a=function(){return t()}}));var s=function(r){a(),n.isRunning=!1,n.queuedCalls.length&&n.queuedCalls.shift()(),"data"in r?t(r.data):e(r.reason)};(function t(){for(var e=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(n.isRunning)n.queuedCalls.push((function(){return t.apply(e,o)}));else{n.isRunning=!0;try{r.apply(this,o).then((function(t){return s({data:t})})).catch((function(t){return s({reason:t})}))}catch(t){s({reason:t})}}}).apply(o,i)}))};return t&&(n=u(a,e)),f.set(o,e),o}function d(t,e,r){var o,i=function(){for(var i=this,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(!t){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");o=u(this,e)}var c,f=void 0;a.length&&"function"==typeof a[a.length-1]&&(f=a.pop()),o.prComplete=new Promise((function(t){return c=function(){return t()}}));var l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c(),o.isRunning=!1,o.queuedCalls.length&&o.queuedCalls.shift()(),f&&f.apply(i,t)};l.hasCallback=!!f,function t(){for(var e=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(o.isRunning)o.queuedCalls.push((function(){return t.apply(e,i)}));else{o.isRunning=!0;try{r.apply(this,n(i,[l]))}catch(t){throw t.message+=" ( This exception should not have been thrown, miss use of run-exclusive buildCb )",t}}}.apply(this,a)};return t&&(o=u(a,e)),f.set(i,e),i}e.buildCb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return d(!0,c(),t[0]);case 2:return d(!0,t[0],t[1])}},e.buildMethodCb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return d(!1,c(),t[0]);case 2:return d(!1,t[0],t[1])}}},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0,e.VoidDeferred=e.Deferred=void 0;var i=r(4),a=function(){var t,e,r=this;this.isPending=!0,this.pr=new Promise((function(n,o){t=function(t){i.overwriteReadonlyProp(r,"isPending",!1),n(t)},e=function(t){i.overwriteReadonlyProp(r,"isPending",!1),o(t)}})),this.resolve=t,this.reject=e};e.Deferred=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);e.VoidDeferred=s},function(t,e,r){"use strict";e.__esModule=!0,e.loosenType=void 0,e.loosenType=function(t){return t}},function(t,e,r){"use strict";e.__esModule=!0,e.safeClearTimeout=e.safeSetTimeout=void 0,e.safeSetTimeout=function(t,e){return setTimeout(t,e)},e.safeClearTimeout=function(t){return clearTimeout(t)}},function(t,e,r){"use strict";e.__esModule=!0,e.isPromiseLike=void 0,e.isPromiseLike=function(t){return"function"==typeof(null==t?void 0:t.then)}},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};e.__esModule=!0,e.StatefulEvt=void 0,r(93);var s=r(7),u=r(19),c=r(94),f=r(1),l=r(10),h=r(32),d=r(20),p=r(5),v=function(t){function e(e){var r=t.call(this)||this;return r.lazyEvtDiff=new u.LazyEvt,r.lazyEvtChangeDiff=new u.LazyEvt,r.__state=e,r.lazyEvtChange=new c.LazyStatefulEvt(r.__state),r}return o(e,t),e.prototype.post=function(t){return this.__post(t,!1)},e.prototype.postForceChange=function(t){return this.__post(t?t[0]:this.state,!0)},e.prototype.__post=function(e,r){var n=this.state;this.__state=e;var o={prevState:n,newState:this.state};return this.lazyEvtDiff.post(o),!r&&Object.is(n,this.state)||(this.lazyEvtChange.post(this.state),this.lazyEvtChangeDiff.post(o)),t.prototype.post.call(this,e)},e.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.prototype.pipe.apply(this,a(e)),o=l.invokeOperator(this.getStatelessOp(h.parsePropsFromArgs(e,"pipe").op),this.state);if(p.z_f1.fλ_Result_NotMatched_match(o))throw new Error(["Cannot pipe StatefulEvt because the operator does not match","it's current state.","Use evt.toStateless([ctx]).pipe(op).toStatic(initialState)","to be sure the StatefulEvt is correctly initialized"].join(" "));return n.toStateful(o[0])},e.prototype.toStateless=function(e){return e?t.prototype.pipe.call(this,e):t.prototype.pipe.call(this)},e.__4=(s.defineAccessors(e.prototype,"state",{get:function(){return this.__state},set:function(t){this.post(t)}}),s.defineAccessors(e.prototype,"evtDiff",{get:function(){return this.lazyEvtDiff.evt}}),s.defineAccessors(e.prototype,"evtChange",{get:function(){return this.lazyEvtChange.evt}}),void s.defineAccessors(e.prototype,"evtChangeDiff",{get:function(){return this.lazyEvtChangeDiff.evt}})),e}(d.Evt);e.StatefulEvt=v,f.importProxy.StatefulEvt=e.StatefulEvt},function(t,e,r){"use strict";e.__esModule=!0,Object.is||(Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e})},function(t,e,r){"use strict";e.__esModule=!0,e.LazyStatefulEvt=void 0;var n=r(4),o=r(1),i=r(7),a=function(){function t(t){this.initialPostCount=0,this.initialState=t}return t.prototype.post=function(t){return void 0===this.__evt?(this.initialState=t,++this.initialPostCount):this.__evt.post(t)},t.__1=void i.defineAccessors(t.prototype,"evt",{get:function(){return void 0===this.__evt&&(this.__evt=new o.importProxy.StatefulEvt(this.initialState),delete this.initialState,n.overwriteReadonlyProp(this.__evt,"postCount",this.initialPostCount)),this.__evt}}),t}();e.LazyStatefulEvt=a},function(t,e,r){"use strict";r.r(e);r(36);var n=r(33);const o=Symbol.for("@dndbeyond/message-broker-lib");var i,a;const s=new URLSearchParams(location.search),u=("true"===s.get("disableMb")&&"true"===s.get("disableLayout")&&s.has("userId"),new Set);window.mobileApp||(window.mobileApp={}),window.mobileApp.gameLogCallback=t=>u.forEach(e=>e(t));i=s.get("gameId"),a=s.get("userId");const c=(t,e)=>new URL(`${t}?${(t=>new URLSearchParams(t))(e)}`).href,f=t=>t.readyState===WebSocket.CONNECTING,l=t=>t.readyState===WebSocket.OPEN,h=t=>t.readyState===WebSocket.CLOSING,d=t=>t.readyState===WebSocket.CLOSED,p=t=>"0"!==t,v=({dateTime:t,eventType:e,userId:r})=>`${t}-${e}-${r}`,y=({dateTime:t},{dateTime:e})=>t>e?-1:t===e?0:1;var _,m=r(0),g=new Uint8Array(16);function b(){if(!_&&!(_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(g)}var w=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var E=function(t){return"string"==typeof t&&w.test(t)},x=[],O=0;O<256;++O)x.push((O+256).toString(16).substr(1));var S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(x[t[e+0]]+x[t[e+1]]+x[t[e+2]]+x[t[e+3]]+"-"+x[t[e+4]]+x[t[e+5]]+"-"+x[t[e+6]]+x[t[e+7]]+"-"+x[t[e+8]]+x[t[e+9]]+"-"+x[t[e+10]]+x[t[e+11]]+x[t[e+12]]+x[t[e+13]]+x[t[e+14]]+x[t[e+15]]).toLowerCase();if(!E(r))throw TypeError("Stringified UUID is invalid");return r};var P,M,A,T,j,C,k,z,R,D,H,I,F,B,L,N,U,G=function(t,e,r){var n=(t=t||{}).random||(t.rng||b)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=n[o];return e}return S(n)},W=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},q=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r},J=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};var Q,$;!function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"}(Q||(Q={}));P=new WeakMap,M=new WeakMap,A=new WeakMap,T=new WeakMap,j=new WeakMap,C=new WeakMap,k=new WeakMap,z=new WeakMap,R=new WeakMap,D=new WeakMap,H=new WeakMap,I=new WeakMap,F=new WeakMap,B=new WeakMap,L=new WeakMap,N=new WeakMap,U=new WeakMap,function(t){t.Pending="pending",t.Fulfilled="fulfilled",t.Rejected="rejected"}($||($={}));var V=r(21);const X=document.getElementById(V.a.baseElementId);if(!X)throw new Error("Invalid config, expected an element with id `".concat(V.a.baseElementId,"`"));const{connecturl:K,getmessagesurl:Y,gameid:Z,userid:tt,source:et,config:rt,environment:nt}=X.dataset;if(!(K&&Y&&Z&&tt&&et&&rt&&nt)){const t={connectUrl:K,getMessagesUrl:Y,gameId:Z,userId:tt,source:et,config:rt,environment:nt};throw new Error("Invalid config, expected `{ ".concat(Object.keys(t).join()," }`, but got: ").concat(JSON.stringify(t,null,2)))}if(void 0!==window[o])throw new Error("A message broker already exists, expected `window[".concat(o.toString(),"]` to be `undefined`, but got: ").concat(window[o]));const{authUrl:ot}=JSON.parse(rt);window[o]=new class{constructor({gameId:t,userId:e,source:r,connectUrl:n,getMessagesUrl:o,getShortTermToken:i}){P.set(this,void 0),M.set(this,void 0),A.set(this,void 0),T.set(this,void 0),j.set(this,void 0),C.set(this,m.Evt.create()),k.set(this,[]),z.set(this,void 0),R.set(this,void 0),D.set(this,!1),H.set(this,!1),I.set(this,""),F.set(this,-1),B.set(this,void 0),L.set(this,void 0),N.set(this,new Set),U.set(this,!0),q(this,P,t),q(this,M,e),q(this,A,r),q(this,T,n),q(this,j,o),q(this,R,i),m.Evt.from(window,"online").attach(()=>this.connect()),m.Evt.from(window,"offline").attach(()=>this.reset()),m.Evt.from(window,"unload").attach(()=>this.reset())}get gameId(){return J(this,P)}set gameId(t){J(this,P)!==t&&(q(this,P,t),this.reset(),J(this,C).post(this.composeMessage({eventType:"replace/messageBroker/gameId"})),p(J(this,P))&&J(this,C).getHandlers().length&&this.connect())}get userId(){return J(this,M)}set userId(t){J(this,M)!==t&&(q(this,M,t),this.reset())}get source(){return J(this,A)}get connectUrl(){return J(this,T)}get getMessagesUrl(){return J(this,j)}get status(){if(void 0===J(this,z))return Q.Disconnected;if(f(J(this,z)))return Q.Connecting;if(l(J(this,z)))return Q.Open;if(h(J(this,z)))return Q.Closing;if(d(J(this,z)))return Q.Closed;throw new Error(`Unexpected web socket \`readyState\` (${J(this,z)}) exists but is not 'connecting', 'open', 'closing', or 'closed'`)}subscribe(t){const e=m.Evt.newCtx();return J(this,C).attach(e,t),this.connect(),()=>e.done()}dispatch(t){const e=JSON.stringify(this.composeMessage(t));this.post(JSON.parse(e)),J(this,k).push(e),this.connect()}fetchHistory(){return W(this,void 0,void 0,(function*(){J(this,D)||J(this,H)||(yield this.validateStt(),this.getMessages(J(this,B)).then(t=>t.forEach(t=>this.post(t))))}))}composeMessage(t){return Object.assign({id:G(),dateTime:""+Date.now(),gameId:this.gameId,userId:this.userId,source:this.source},t)}post(t){J(this,N).has(t.id)||(J(this,N).add(t.id),(!J(this,B)||J(this,B)>t.dateTime)&&q(this,B,v(t)),(!J(this,L)||J(this,L)<t.dateTime)&&q(this,L,v(t)),J(this,C).post(t))}reset(){J(this,z)&&!d(J(this,z))&&J(this,z).close(),J(this,k).length=0,q(this,z,void 0),q(this,B,void 0),q(this,L,void 0),J(this,N).clear(),q(this,U,!0)}connect(){return W(this,void 0,void 0,(function*(){var t,e;if(p(J(this,P))&&!J(this,D))return J(this,z)?h(J(this,z))||d(J(this,z))?(this.reset(),void this.connect()):void(f(J(this,z))||l(J(this,z))&&J(this,k).length&&this.flushQueue()):(yield this.validateStt(),this.getMessages().then(t=>t.forEach(t=>this.post(t))),q(this,z,(t=J(this,T),e={gameId:J(this,P),userId:J(this,M),stt:J(this,I)},new WebSocket(c(t,e)))),m.Evt.from(J(this,z),"open").attachOnce(()=>this.flushQueue()),m.Evt.merge([m.Evt.from(J(this,z),"close"),m.Evt.from(J(this,z),"error")]).attachOnce(()=>this.reset()),void m.Evt.from(J(this,z),"message").attach(t=>"pong"!==t.data,t=>{this.post(JSON.parse(t.data))}))}))}validateStt(){return W(this,void 0,void 0,(function*(){try{q(this,D,!0),q(this,I,yield J(this,R).call(this))}catch(t){console.error("Failed to get short term token",t)}finally{q(this,D,!1)}}))}getMessages(t){return W(this,void 0,void 0,(function*(){if(!p(J(this,P))||!J(this,U))return[];let e;try{q(this,H,!0),e=yield fetch(c(J(this,j),Object.assign(Object.assign({},t&&{lastEvaluatedKey:t}),{gameId:J(this,P),userId:J(this,M)})),{headers:{Authorization:"Bearer "+J(this,I)}})}catch(t){return console.error("Failed to get messages",t),this.reset(),[]}if(!e.ok)return console.error("Failed to get messages, server responded with:",{status:e.status,statusText:e.statusText}),[];const{data:r,lastKey:n}=yield e.json();q(this,U,null!==n);let o=r;if(!t&&J(this,L)){let t=1,e=o.map(v).sort();for(;!e.includes(J(this,L))&&t++<10&&void 0!==e[0];){const t=yield this.getMessages(e[0]);o=o.concat(t),e=o.map(v).sort()}}return q(this,H,!1),o.sort(y)}))}flushQueue(){if(J(this,z)){for(;J(this,k).length;){const t=J(this,k).shift();t&&J(this,z).send(t)}clearTimeout(J(this,F)),q(this,F,setTimeout(()=>this.ping(),3e5))}else this.connect()}ping(){J(this,z)?(J(this,z).send('{"data":"ping"}'),clearTimeout(J(this,F)),q(this,F,setTimeout(()=>this.ping(),3e5))):this.connect()}}({connectUrl:K,getMessagesUrl:Y,gameId:Z,userId:tt,source:et,getShortTermToken:n.AuthUtils.makeGetShortTermToken({authUrl:ot})})}]);